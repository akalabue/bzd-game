{"version":3,"sources":["file:///D:/Documents/OneDrive/%E6%A1%8C%E9%9D%A2/%E5%85%B6%E4%BB%96%E6%96%87%E4%BB%B6%E5%A4%B9/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/PokerBomb/bzd-game/PokerBomb-Client/assets/Script/games/bazhadan/BZDSceneMgt.ts"],"names":["_decorator","Component","Node","Label","SpriteAtlas","Sprite","director","tween","Vec3","PushCardVo","BZDSoundMgt","ccclass","property","BZDSceneMgt","cardList","cardSet","Set","pushcardVo","promptInfo","index","start","init","console","log","globalThis","_eventtarget","on","onRequestRoomInfo","onUserReady","onDealCards","onPushCards","onUpdatePoints","panGameOver","newUserJoinRoom","onPrompt","onPromptBtnClicked","curSeat","_userInfo","room_seat","_BZDClient","sendMessage","pushCardsInfo","JSON","stringify","cleanCardSet","promptCard","data","length","bzdSoundMgt","play","arg","cardName","cardNode","pokerView","getChildByName","p","getPosition","has","delete","y","add","setPosition","seat","newUserInfo","userInfo","updateTheseat","seatName","string","userName","seatTotalPoints","totalPoints","seatJuPoints","juPoints","seatPanPoints","panPoints","readyOk","active","userStatus","status","panOver","info","panGameOverInfo","panGameInfo","panGameInfos","i","label","getComponent","points","teamPoints","total","roomInfo","roomId","gamecount","currentNumbers","gameNumbers","scoreNumbers","updateAllSeats","users","gameRoles","cur","userId","user_id","j","passLable","pushCardsView","bool","readyBtn","cancelReadyBtn","readyNumbers","createUserId","startBtn","cleanPushCards","userCards","showPushCards","showPoker","q","prePushSeat","pushCardBtn","passBtn","paiPoints","curPoints","mySeat","ready","isReady","onReadyBtnClicked","room_id","onCancelReadyBtnClicked","onStartBtnClicked","onExitRoomBtnClicked","loadScene","cards","pushSeat","onloadAtlas","promptBtn","bpk","pokerAtlas","getSpriteFrame","x","z","pk","sp","spriteFrame","to","position","call","onCardClicked","type","onPushCardBtnClicked","curCardList","Array","from","sort","a","b","spf","cardValue","name","push","Number","randomAudioName","random","min","max","Math","floor","arr","idx","isRight","audioName","preSeat","preStatus","size","d_x","preCardList","clear","preUserCards","myStatus","showPushCardsBtn","onPassBtnClicked","pcv","onPanOverPageClosedBtnClicked","playAudioEffect"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, Label, System, assetManager, AssetManager, SpriteAtlas, Prefab, instantiate, resources, SpriteFrame, Sprite, director, tween, Vec3 } from 'cc';\r\nimport { GameRole } from '../../common/GameRole';\r\nimport { PushCardVo } from '../../common/PushCardVo';\r\nimport { BZDSoundMgt } from './BZDSoundMgt';\r\nimport { Poker } from './Poker';\r\nimport { PokerCtr } from './PokerCtr';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('BZDSceneMgt')\r\nexport class BZDSceneMgt extends Component {\r\n\r\n    @property(Label)\r\n    public roomId: Label\r\n    @property(Label)\r\n    public gamecount: Label\r\n\r\n    @property(Label)\r\n    seatName: Label[] = [];\r\n    @property(Label)\r\n    seatTotalPoints: Label[] = [];\r\n    \r\n    @property(Label)\r\n    seatJuPoints: Label[] = []\r\n    \r\n    @property(Label)\r\n    seatPanPoints: Label[] = []\r\n    \r\n    @property(Node)\r\n    readyOk: Node[] = []\r\n\r\n    @property(Node)\r\n    pushCardsView: Node[] = []\r\n\r\n    @property(Node)\r\n    passLable: Node[] = []\r\n    \r\n    @property(Node)\r\n    readyBtn: Node\r\n    \r\n    @property(Node)\r\n    cancelReadyBtn: Node\r\n    \r\n    @property(Node)\r\n    startBtn: Node\r\n\r\n    @property(Node)\r\n    pokerView: Node\r\n\r\n    @property(Node)\r\n    passBtn: Node\r\n\r\n    @property(Node)\r\n    promptBtn: Node\r\n\r\n    @property(Node)\r\n    pushCardBtn: Node\r\n\r\n    @property(Label)\r\n    paiPoints: Label\r\n\r\n    @property(Node)\r\n    panOver: Node\r\n\r\n    @property(SpriteAtlas)\r\n    pokerAtlas: SpriteAtlas;\r\n\r\n    @property(BZDSoundMgt)\r\n    bzdSoundMgt: BZDSoundMgt\r\n\r\n\r\n    cardList: number[];\r\n    cardSet: Set<number> = new Set;\r\n    // pushCardSet: Set<number> = new Set;\r\n    pushcardVo: PushCardVo\r\n    promptInfo = null\r\n    index: number = 0\r\n\r\n    \r\n    start() {\r\n        this.init();\r\n        console.log(\"怡怡最美~\");\r\n        console.log(\"最爱怡怡~\");\r\n    }\r\n\r\n    private init(){\r\n        this.pushcardVo = new PushCardVo();\r\n        globalThis._eventtarget.on(\"requestRoomInfo\", this.onRequestRoomInfo, this);\r\n        globalThis._eventtarget.on(\"userReady\", this.onUserReady, this);\r\n        globalThis._eventtarget.on(\"dealCards\", this.onDealCards, this);\r\n        globalThis._eventtarget.on(\"pushCards\", this.onPushCards, this);\r\n        globalThis._eventtarget.on(\"updatePoints\", this.onUpdatePoints, this);\r\n        globalThis._eventtarget.on(\"panGameOver\", this.panGameOver, this);\r\n        globalThis._eventtarget.on(\"newUserJoinRoom\", this.newUserJoinRoom, this);\r\n        globalThis._eventtarget.on(\"prompt\", this.onPrompt, this);\r\n    }\r\n    onPromptBtnClicked(){\r\n        if(this.promptInfo == null){\r\n            this.pushcardVo.curSeat = globalThis._userInfo.room_seat;\r\n            globalThis._BZDClient.sendMessage(\"prompt\",{pushCardsInfo: JSON.stringify(this.pushcardVo)});\r\n        }else {\r\n            this.cleanCardSet();\r\n            this.promptCard();\r\n        }\r\n    }\r\n    onPrompt(data){\r\n        this.promptInfo = data.promptInfo;\r\n        this.promptCard();\r\n    }\r\n    promptCard(){\r\n        if(this.promptInfo.length == 0){\r\n            console.log(\"您没有比上家大的牌！\");\r\n            return;\r\n        }\r\n        if(this.index >= this.promptInfo.length)this.index = 0;\r\n        let cardList:number[] = this.promptInfo[this.index];\r\n        this.bzdSoundMgt.play(\"SpecSelectCard\");\r\n        for(let arg of cardList){\r\n            let cardName = \"card\" + arg;\r\n            let cardNode = this.pokerView.getChildByName(cardName);\r\n            \r\n            let p = cardNode.getPosition()\r\n            if(this.cardSet.has(arg)){\r\n                this.cardSet.delete(arg);\r\n                p.y -= 30;\r\n            }else {\r\n                this.cardSet.add(arg);\r\n                p.y += 30;\r\n            }\r\n            cardNode.setPosition(p);\r\n        }\r\n        this.index++;\r\n    }\r\n    newUserJoinRoom(data) {\r\n        let seat = data.newUserInfo.seat;\r\n        let userInfo = data.newUserInfo.userInfo;\r\n        this.updateTheseat(seat, userInfo);\r\n    }\r\n    updateTheseat(seat: any, userInfo: any) {\r\n        if(seat == globalThis._userInfo.room_seat)return;\r\n        seat = (seat - globalThis._userInfo.room_seat + 4) % 4;\r\n        this.seatName[seat].string = userInfo.userName;\r\n        this.seatTotalPoints[seat].string = \"总分:\" + userInfo.totalPoints;\r\n        this.seatJuPoints[seat].string = \"局:\" + userInfo.juPoints;\r\n        this.seatPanPoints[seat].string = \"盘:\" + userInfo.panPoints;\r\n        this.readyOk[seat].active = (userInfo.userStatus.status == \"READY\");\r\n    }\r\n    panGameOver(data) {\r\n        this.panOver.active = true;\r\n        let info = data.panGameOverInfo;\r\n        let panGameInfo = info.panGameInfos;\r\n        let i = globalThis._userInfo.room_seat % 2;\r\n        let label = this.panOver.getChildByName(\"计分板\").getChildByName(\"本队积分详情\").getComponent(Label);\r\n        label.string = \"牌面积分：\" + panGameInfo[i].points + \"\\n队伍积分：\" + panGameInfo[i].teamPoints \r\n        + \"\\n总计：\" + panGameInfo[i].total + \"\\n局分：\" + panGameInfo[i].juPoints;\r\n\r\n        i = (i + 1) % 2;\r\n        label = this.panOver.getChildByName(\"计分板\").getChildByName(\"他队积分详情\").getComponent(Label);\r\n        label.string = \"牌面积分：\" + panGameInfo[i].points + \"\\n队伍积分：\" + panGameInfo[i].teamPoints \r\n        + \"\\n总计：\" + panGameInfo[i].total + \"\\n局分：\" + panGameInfo[i].juPoints;\r\n    }\r\n    onUpdatePoints(data) {\r\n        let seat = (data.seat - globalThis._userInfo.room_seat + 4) % 4;\r\n        let panPoints = data.panPoints;\r\n        this.seatPanPoints[seat].string = \"盘:\" + panPoints;\r\n        this.seatPanPoints[(seat + 2) % 4].string = \"盘:\" + panPoints;\r\n    }\r\n\r\n    \r\n    onRequestRoomInfo(data){\r\n        let roomInfo = data.roomInfo;\r\n        this.roomId.string = roomInfo.roomId;\r\n        this.gamecount.string = roomInfo.currentNumbers + \"/\" + roomInfo.gameNumbers + \"局 \" + roomInfo.scoreNumbers + \"分\";\r\n        this.updateAllSeats(roomInfo);\r\n    }\r\n\r\n    updateAllSeats(roomInfo){\r\n        this.pokerView.active = false;\r\n        let users: GameRole[] = roomInfo.gameRoles;\r\n        //先找到本玩家座位号\r\n        let cur = 0;\r\n        for(let i = 0; i < 4; i++){\r\n            if(users[i] == null){\r\n                continue;\r\n            }\r\n            if(users[i].userId == globalThis._userInfo.user_id){\r\n                cur = i;\r\n                break;\r\n            }\r\n        }\r\n        globalThis._userInfo.room_seat = cur;\r\n        //渲染各座位信息\r\n        for(let i = 0, j = cur; i < 4; i++, j++){\r\n            if(j >= 4)j -= 4;\r\n            if(users[j] == null)continue;\r\n            this.seatName[i].string = users[j].userName;\r\n            this.seatTotalPoints[i].string = \"总分:\" + users[j].totalPoints;\r\n            this.seatJuPoints[i].string = \"局:\" + users[j].juPoints;\r\n            this.seatPanPoints[i].string = \"盘:\" + users[j].panPoints;\r\n            this.readyOk[i].active = (users[j].userStatus.status == \"READY\");\r\n            this.passLable[i].active = false;\r\n        }\r\n        let status = users[0].userStatus.status;\r\n        //还未发牌\r\n        if(status == \"UNREADY\" || status == \"READY\"){\r\n            console.log(\"还未发牌\")\r\n            for(let i = 0, j = cur; i < 4; i++, j++){\r\n                this.pushCardsView[i].active = false;\r\n                if(j >= 4)j -= 4;\r\n                if(users[j] == null)continue;\r\n                let bool = users[j].userStatus.status == \"READY\";\r\n                this.readyOk[i].active = bool;\r\n            }\r\n            let bool = users[cur].userStatus.status == \"READY\";\r\n            this.readyBtn.active = !bool;\r\n            this.cancelReadyBtn.active = bool;\r\n            if(roomInfo.readyNumbers == 4 && globalThis._userInfo.user_id == roomInfo.createUserId)this.startBtn.active = true;\r\n            else this.startBtn.active = false;\r\n        }else {\r\n            //已经发牌了\r\n            console.log(\"已经发牌了\");\r\n            for(let i = 0; i < 4; i++){\r\n                this.cleanPushCards(i);\r\n            }\r\n            //显示玩家手牌\r\n            this.cardList = users[cur].userCards;\r\n            let bool = true;\r\n            for(let i = 0, j = cur; i < 4; i++, j++){\r\n                if(j >= 4)j -= 4;\r\n                let status = users[j].userStatus.status;\r\n                if(status == \"PLAYED\"){\r\n                    console.log(\"玩家\",j,\"出过牌了\")\r\n                    let cardList = users[j].userStatus.data;\r\n                    this.showPushCards(i, cardList);\r\n                    bool = false;\r\n                }else if(status == \"PLAYING\"){\r\n                    // this.onloadAtlas(j);\r\n                    console.log(\"玩家\",j,\"正在出牌\")\r\n                    this.showPoker(j);\r\n                    if(j == cur){\r\n                        for(let p = 0, q = cur; p < 4; p++, q--){\r\n                            if(q < 0)q += 4;\r\n                            if(users[q].userStatus.status == \"PLAYED\"){\r\n                                this.pushcardVo.prePushSeat = q;\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                }else if(status == \"PASS\"){\r\n                    this.passLable[i].active = true;\r\n                }else if(status == \"END\"){\r\n                    //\r\n                }\r\n            }\r\n            if(users[cur].userStatus.status == \"PLAYING\"){\r\n                this.pushCardBtn.active = true;\r\n                this.passBtn.active = bool;\r\n            }\r\n            this.paiPoints.string = \"牌面积分:\" + roomInfo.curPoints;\r\n        }\r\n    }\r\n\r\n    onUserReady(data){\r\n        let mySeat = globalThis._userInfo.room_seat;\r\n        if(data.readyNumbers == 4 && globalThis._userInfo.user_id == data.createUserId)this.startBtn.active = true;\r\n        else this.startBtn.active = false;\r\n        let seat = data.seat;\r\n        let ready:boolean = (data.isReady == 1);\r\n        this.readyOk[(seat - mySeat + 4) % 4].active = ready;\r\n        \r\n    }\r\n    onReadyBtnClicked(){\r\n        this.bzdSoundMgt.play(\"button\");\r\n        this.readyBtn.active = false;\r\n        this.cancelReadyBtn.active = true;\r\n        globalThis._BZDClient.sendMessage(\"userReady\",{seat:globalThis._userInfo.room_seat, isReady: 1, roomId:globalThis._userInfo.room_id})\r\n    }\r\n\r\n    onCancelReadyBtnClicked(){\r\n        this.bzdSoundMgt.play(\"button\");\r\n        this.readyBtn.active = true;\r\n        this.cancelReadyBtn.active = false;\r\n        globalThis._BZDClient.sendMessage(\"userReady\",{seat:globalThis._userInfo.room_seat, isReady: -1, roomId:globalThis._userInfo.room_id})\r\n    }\r\n\r\n    onStartBtnClicked(){\r\n        this.bzdSoundMgt.play(\"button\");\r\n        globalThis._BZDClient.sendMessage(\"dealCards\",{});\r\n    }\r\n\r\n    onExitRoomBtnClicked(){\r\n        this.bzdSoundMgt.play(\"button\");\r\n        director.loadScene(\"HallScene\");\r\n    }\r\n\r\n    onDealCards(data){\r\n        console.log(\"获得牌型：\",data);\r\n        this.bzdSoundMgt.play(\"DealFold\");\r\n        \r\n        this.startBtn.active = false;\r\n        this.readyBtn.active = false;\r\n        this.cancelReadyBtn.active = false;\r\n        //初始化各出牌区域\r\n        for(let i = 0; i < 4; i++){\r\n            this.cleanPushCards(i);\r\n        }\r\n        for(let i = 0; i < 4; i++){\r\n            this.readyOk[i].active = false;\r\n        }\r\n        let cards = data.cardList[globalThis._userInfo.room_seat];\r\n        let pushSeat = data.pushSeat;\r\n        this.cardList = cards;\r\n        this.pushcardVo.prePushSeat = pushSeat;\r\n        // this.onloadAtlas(pushSeat);\r\n        this.showPoker(pushSeat);\r\n    }\r\n\r\n    onloadAtlas(j) {\r\n        // resources.load(\"image/games/bazhadan/card/pokerlist\", SpriteAtlas, (err, spriteAtlas)=>{\r\n        //     if(err)console.log(\"load atlas err: \", err);\r\n        //     else {\r\n        //         this.pokerAtlas = spriteAtlas;\r\n        //         this.showPoker(j);\r\n        //     }\r\n        // })\r\n\r\n        this.showPoker(j);\r\n    }\r\n    showPoker(j) {\r\n        this.pokerView.active = true;\r\n        this.passBtn.active = false;\r\n        this.pushCardBtn.active = false;\r\n        this.promptBtn.active = false;\r\n        let bpk = this.pokerAtlas.getSpriteFrame(\"0\");\r\n        let x = -360, y = -50, z = 0;\r\n        for(let i = 0; i < this.cardList.length; i++){\r\n            if(i == 17){\r\n                y = -150;\r\n                x -= 850;\r\n            }\r\n            let pk = this.pokerAtlas.getSpriteFrame(this.cardList[i]+\"\");\r\n            let cardName = \"card\" + i;\r\n            let cardNode = this.pokerView.getChildByName(cardName);\r\n            cardNode.setPosition(new Vec3(0, 185, 0));\r\n            cardNode.active = true;\r\n            let sp = cardNode.getComponent(Sprite);\r\n            sp.spriteFrame = bpk;\r\n            tween(cardNode).to(1.5,{position: new Vec3(i*50+x, y, z)})\r\n            .call(() => {\r\n                sp.spriteFrame = pk;\r\n                if(i == 26){        \r\n                    if(globalThis._userInfo.room_seat == j){\r\n                        this.pushCardBtn.active = true;\r\n                        if(globalThis._userInfo.room_seat != this.pushcardVo.prePushSeat){\r\n                            this.passBtn.active = true;\r\n                        }\r\n                    }\r\n                }\r\n            }).start();\r\n        }\r\n    }\r\n\r\n    onCardClicked(type,arg){\r\n        arg = arg * 1;\r\n        this.bzdSoundMgt.play(\"SpecSelectCard\");\r\n        let cardName = \"card\" + arg;\r\n        let cardNode = this.pokerView.getChildByName(cardName);\r\n        \r\n        let p = cardNode.getPosition()\r\n        if(this.cardSet.has(arg)){\r\n            this.cardSet.delete(arg);\r\n            p.y -= 30;\r\n        }else {\r\n            this.cardSet.add(arg);\r\n            p.y += 30;\r\n        }\r\n        cardNode.setPosition(p);\r\n    }\r\n\r\n    onPushCardBtnClicked(){\r\n        console.log(\"出牌！\")\r\n        console.log(this.pushcardVo);\r\n        console.log(JSON.stringify(this.pushcardVo));\r\n        this.pushcardVo.curCardList.length = 0;\r\n        \r\n        let cards = Array.from(this.cardSet);\r\n        cards.sort((a, b) => a - b);\r\n        console.log(\"eee:\",cards);\r\n        for(let i of cards){\r\n            let cardName = \"card\" + i;\r\n            let cardNode = this.pokerView.getChildByName(cardName);\r\n            let sp = cardNode.getComponent(Sprite);\r\n            let spf = sp.spriteFrame;\r\n            let cardValue = spf.name;\r\n            this.pushcardVo.curCardList.push(Number(cardValue));\r\n        }\r\n        this.pushcardVo.curSeat = globalThis._userInfo.room_seat;\r\n        globalThis._BZDClient.sendMessage(\"pushCards\",{pushCardsInfo: JSON.stringify(this.pushcardVo)});\r\n        \r\n    }\r\n\r\n    randomAudioName(type){\r\n        const random = (min:any,max:any) => Math.floor(Math.random() * (max - min + 1) + min)\r\n        let arr:any = [\"Woman_\",\"Man_\"]\r\n            \r\n        let idx = random( 0,1)\r\n        if(type == \"buyao\"){\r\n            let idx = random(1, 4);\r\n            type += idx;\r\n        }\r\n        return arr[idx] + type;\r\n    }\r\n    onPushCards(data){\r\n        this.pushcardVo = data.pushCardsInfo;\r\n        let curSeat = globalThis._userInfo.room_seat;\r\n        let isRight: boolean = data.isRight;\r\n        let audioName = this.randomAudioName(this.pushcardVo.type);\r\n        //出牌正确\r\n        if(isRight){\r\n            this.bzdSoundMgt.play(audioName);\r\n            //是我出的牌\r\n            if(curSeat == this.pushcardVo.preSeat){\r\n                if(this.pushcardVo.preStatus == \"PLAYED\"){\r\n                    this.bzdSoundMgt.play(\"Special_give\")\r\n                    let length = this.cardSet.size;\r\n                    let d_x = 30;\r\n                    let x = -70 - d_x * (length / 2);\r\n                    let cards = Array.from(this.cardSet);\r\n                    cards.sort((a, b) => a - b);\r\n                    for(let i of cards){\r\n                        // this.pushCardSet.add(i);\r\n                        let cardName = \"card\" + i;\r\n                        let cardNode = this.pokerView.getChildByName(cardName);\r\n                        cardNode.active = false;\r\n                        // tween(cardNode).to(0.8,{position: new Vec3(x,90,0)}).start();\r\n                        // x += d_x;\r\n                    }\r\n                    let cardList = this.pushcardVo.preCardList;                   \r\n                    this.showPushCards(0, cardList);\r\n                    this.cardSet.clear();\r\n                    //调整剩余牌序\r\n                    x = -360; let y = -50, z = 0;\r\n                    this.cardList = this.pushcardVo.preUserCards;\r\n                    for(let i = 0; i < this.cardList.length; i++){\r\n                        if(i == 17){\r\n                            y = -150;\r\n                            x -= 850;\r\n                        }\r\n                        let pk = this.pokerAtlas.getSpriteFrame(this.cardList[i]+\"\");\r\n                        let cardName = \"card\" + i;\r\n                        let cardNode = this.pokerView.getChildByName(cardName);\r\n                        let sp = cardNode.getComponent(Sprite);\r\n                        sp.spriteFrame = pk;\r\n                        cardNode.setPosition(new Vec3(i*50+x, y, z));\r\n                        cardNode.active = true;\r\n                    }\r\n                    for(let i = this.cardList.length; i < 27; i++){\r\n                        let cardName = \"card\" + i;\r\n                        let cardNode = this.pokerView.getChildByName(cardName);\r\n                        cardNode.active = false;\r\n                    }\r\n\r\n                    //调整按钮显示状态\r\n                    this.passBtn.active = false;\r\n                    this.promptBtn.active = false;\r\n                    this.pushCardBtn.active = false;\r\n                }else if(this.pushcardVo.preStatus == \"PASS\"){\r\n                    \r\n                }\r\n            }\r\n            \r\n            //不是我出的牌，将对应出牌位置更新\r\n            else{\r\n                //先更新出牌位置信息(将牌型展出)，到下一家出牌\r\n                let seat = (this.pushcardVo.preSeat - curSeat + 4) % 4;\r\n                this.cleanPushCards(seat);\r\n                if(this.pushcardVo.preSeat == this.pushcardVo.prePushSeat){//if(this.pushcardVo.preStatus == \"PLAYED\")\r\n                    let cardList = this.pushcardVo.preCardList;                   \r\n                    this.showPushCards(seat, cardList);\r\n                }else if(this.pushcardVo.preStatus == \"PASS\"){\r\n                    this.passLable[seat].active = true;\r\n                }else if(this.pushcardVo.preStatus == \"END\"){\r\n\r\n                }\r\n                \r\n                //如果下家是我\r\n                if((this.pushcardVo.preSeat + 1) % 4 == curSeat){\r\n                    // for(let i of this.pushCardSet){\r\n                    //     let cardName = \"card\" + i;\r\n                    //     let cardNode = this.pokerView.getChildByName(cardName);\r\n                    //     cardNode.active = false;\r\n                    // }\r\n                    // this.pushCardSet.clear();\r\n                    if(this.pushcardVo.myStatus == \"PLAYING\"){\r\n                        this.cleanPushCards(0);\r\n                        this.promptInfo = null;\r\n                        if(globalThis._userInfo.room_seat == this.pushcardVo.prePushSeat){\r\n                                this.passBtn.active = false;\r\n                                this.promptBtn.active = false;\r\n                            }\r\n                        else {\r\n                            this.passBtn.active = true;\r\n                            this.promptBtn.active = true;\r\n                        }\r\n                        this.pushCardBtn.active = true;\r\n                    }else if(this.pushcardVo.myStatus == \"END\"){\r\n                        this.pushcardVo.curSeat = globalThis._userInfo.room_seat;\r\n                        globalThis._BZDClient.sendMessage(\"userEnd\",{pushCardsInfo: JSON.stringify(this.pushcardVo)});\r\n                    }else if(this.pushcardVo.myStatus == \"OVER\"){\r\n                        console.log(\"游戏结束!\")\r\n                        this.pushcardVo.curSeat = globalThis._userInfo.room_seat;\r\n                        globalThis._BZDClient.sendMessage(\"panGameOver\",{pushCardsInfo: JSON.stringify(this.pushcardVo)});\r\n                    }else if(this.pushcardVo.myStatus == \"TOTEAMMATE\"){\r\n                        this.pushcardVo.curSeat = globalThis._userInfo.room_seat;\r\n                        globalThis._BZDClient.sendMessage(\"TOTEAMMATE\",{pushCardsInfo: JSON.stringify(this.pushcardVo)});\r\n                    }\r\n                }\r\n            }\r\n            this.paiPoints.string = \"牌面积分:\" + this.pushcardVo.points;\r\n        }\r\n        //出牌不正确\r\n        else {\r\n            if(curSeat == this.pushcardVo.curSeat){\r\n                //是我出的牌\r\n                this.bzdSoundMgt.play(\"SpecSysReturnFail\");\r\n                console.log(\"不能这样出牌！\");\r\n            }\r\n            else {\r\n                //不是我出的牌，不用管\r\n            }\r\n        }\r\n    }\r\n    showPushCards(seat, cardList){\r\n        let pushCardsView = this.pushCardsView[seat];\r\n        for(let i = 0; i < cardList.length; i++){\r\n            let pk = this.pokerAtlas.getSpriteFrame(cardList[i]+\"\");\r\n            let cardName = \"card\" + i;\r\n            let cardNode = pushCardsView.getChildByName(cardName);\r\n            let sp = cardNode.getComponent(Sprite);\r\n            sp.spriteFrame = pk;\r\n            cardNode.active = true;\r\n        }\r\n    }\r\n    showPushCardsBtn() {\r\n        console.log(\"1:\",globalThis._userInfo.room_seat);\r\n        console.log(\"2:\",this.pushcardVo.prePushSeat);\r\n        if(globalThis._userInfo.room_seat == this.pushcardVo.prePushSeat)\r\n            this.passBtn.active = false;\r\n        else \r\n            this.passBtn.active = true;\r\n\r\n        if(globalThis._userInfo.room_seat == (this.pushcardVo.preSeat + 1) % 4)\r\n            this.pushCardBtn.active = true;\r\n\r\n        console.log(this.pushCardBtn.active);\r\n    }\r\n\r\n    onPassBtnClicked(){\r\n        this.passBtn.active = false;\r\n        this.pushCardBtn.active = false;\r\n        this.promptBtn.active = false;\r\n        this.passLable[0].active = true;\r\n        this.pushcardVo.curSeat = globalThis._userInfo.room_seat;\r\n        this.cleanCardSet();\r\n        globalThis._BZDClient.sendMessage(\"passCards\",{pushCardsInfo: JSON.stringify(this.pushcardVo)});\r\n    }\r\n\r\n    cleanCardSet(){\r\n        for(let arg of this.cardSet){\r\n            let cardName = \"card\" + arg;\r\n            let cardNode = this.pokerView.getChildByName(cardName);\r\n            let p = cardNode.getPosition()\r\n            this.cardSet.delete(arg);\r\n            p.y -= 30;\r\n            cardNode.setPosition(p);\r\n        }\r\n    }\r\n\r\n    cleanPushCards(i){\r\n        let pcv = this.pushCardsView[i];\r\n        pcv.active = true;\r\n        for(let i = 0; i < 27; i++){\r\n            let cardName = \"card\" + i;\r\n            let cardNode = pcv.getChildByName(cardName);\r\n            // let sp = cardNode.getComponent(Sprite);\r\n            // sp.spriteFrame = null;\r\n            cardNode.active = false;\r\n        }\r\n        this.passLable[i].active = false;\r\n    }\r\n\r\n    onPanOverPageClosedBtnClicked(){\r\n        this.bzdSoundMgt.play(\"button\");\r\n        this.panOver.active = false;\r\n        this.pushcardVo = new PushCardVo();\r\n        globalThis._BZDClient.sendMessage(\"requestRoomInfo\",{});\r\n    }\r\n\r\n    playAudioEffect(name:string){\r\n        this.bzdSoundMgt.play(name);\r\n    }\r\n}\r\n\r\n\r\n"]}