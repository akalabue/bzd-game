{"version":3,"sources":["file:///D:/Documents/OneDrive/%E6%A1%8C%E9%9D%A2/%E5%85%B6%E4%BB%96%E6%96%87%E4%BB%B6%E5%A4%B9/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/PokerBomb/PokerBomb-Client/assets/Script/games/bazhadan/BZDSoundMgt.ts"],"names":["_decorator","Component","AudioClip","AudioSource","resources","ccclass","property","BZDSoundMgt","audioList","_dict","Map","_audioSource","start","console","log","preloadDir","setTimeout","loadAssets","bind","getComponent","globalThis","thisObj","loadDir","err","assets","i","length","element","set","name","play","audioClip","get","undefined","playOneShot"],"mappings":";;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAiBC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,S,OAAAA,S;;;;;;;OACxD;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;;6BAGjBO,W,WADZF,OAAO,CAAC,aAAD,C,gBAAR,MACaE,WADb,SACiCN,SADjC,CAC2C;AAAA;AAAA;AAAA,eACvCO,SADuC,GACd,EADc;AAAA,eAI/BC,KAJ+B,GAIC,IAAIC,GAAJ,EAJD;AAAA,eAK/BC,YAL+B,GAKH,IALG;AAAA;;AAOvCC,QAAAA,KAAK,GAAG;AACJC,UAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EAAkB,IAAlB;AACAV,UAAAA,SAAS,CAACW,UAAV,CAAqB,OAArB;AACAC,UAAAA,UAAU,CAAC,KAAKC,UAAL,CAAgBC,IAAhB,CAAqB,IAArB,CAAD,EAA6B,IAA7B,CAAV;AACAL,UAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;AAEA,eAAKH,YAAL,GAAoB,KAAKQ,YAAL,CAAkBhB,WAAlB,CAApB,CANI,CAM+C;AACtD;;AAEDc,QAAAA,UAAU,GAAE;AACRG,UAAAA,UAAU,CAACC,OAAX,GAAqB,IAArB;AACAjB,UAAAA,SAAS,CAACkB,OAAV,CAAkB,QAAlB,EAA4BpB,SAA5B,EAAuC,UAAUqB,GAAV,EAAeC,MAAf,EAAuB;AAC1D,gBAAGD,GAAH,EAAO;AACHV,cAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAwBS,GAAxB;AACH,aAFD,MAEK;AACDV,cAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAwB,IAAxB;AACAM,cAAAA,UAAU,CAACC,OAAX,CAAmBb,SAAnB,GAA+BgB,MAA/B;;AACA,mBAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGL,UAAU,CAACC,OAAX,CAAmBb,SAAnB,CAA6BkB,MAAjD,EAAyDD,CAAC,EAA1D,EAA8D;AAC1D,oBAAME,OAAO,GAAGP,UAAU,CAACC,OAAX,CAAmBb,SAAnB,CAA6BiB,CAA7B,CAAhB;;AACAL,gBAAAA,UAAU,CAACC,OAAX,CAAmBZ,KAAnB,CAAyBmB,GAAzB,CAA6BD,OAAO,CAACE,IAArC,EAA2CF,OAA3C;AACH;;AACDd,cAAAA,OAAO,CAACC,GAAR,CAAYM,UAAU,CAACC,OAAX,CAAmBZ,KAA/B;AACH;AACJ,WAZD;AAcH;;AACMqB,QAAAA,IAAI,CAACD,IAAD,EAAe;AACtB,cAAME,SAAS,GAAG,KAAKtB,KAAL,CAAWuB,GAAX,CAAeH,IAAf,CAAlB;;AACAhB,UAAAA,OAAO,CAACC,GAAR,CAAY,KAAKL,KAAjB,EAAuBsB,SAAvB,EAAiC,KAAKpB,YAAtC;;AACA,cAAIoB,SAAS,KAAKE,SAAlB,EAA6B;AACzB,iBAAKtB,YAAL,CAAkBuB,WAAlB,CAA8BH,SAA9B;AACH;AACJ;;AAvCsC,O","sourcesContent":["import { _decorator, Component, Node, AudioClip, AudioSource, resources } from 'cc';\nconst { ccclass, property } = _decorator;\n\n@ccclass('BZDSoundMgt')\nexport class BZDSoundMgt extends Component {\n    audioList: AudioClip[] = [];\n    \n\n    private _dict: Map<string, AudioClip> = new Map();//音频集合\n    private _audioSource: AudioSource = null;\n    \n    start() {\n        console.log(\"aaa\",this);\n        resources.preloadDir('sound');\n        setTimeout(this.loadAssets.bind(this), 1000);\n        console.log(\"加载音频资源...\")\n\n        this._audioSource = this.getComponent(AudioSource);//音频组件初始化\n    }\n\n    loadAssets(){\n        globalThis.thisObj = this;\n        resources.loadDir('sound/', AudioClip, function (err, assets) {\n            if(err){\n                console.log(\"加载音频资源出错：\",err);\n            }else{\n                console.log(\"加载得到音频资源：\",this);\n                globalThis.thisObj.audioList = assets;\n                for (let i = 0; i < globalThis.thisObj.audioList.length; i++) {\n                    const element = globalThis.thisObj.audioList[i];\n                    globalThis.thisObj._dict.set(element.name, element);\n                }\n                console.log(globalThis.thisObj._dict);\n            }\n        });\n        \n    }\n    public play(name: string) {\n        const audioClip = this._dict.get(name);\n        console.log(this._dict,audioClip,this._audioSource);\n        if (audioClip !== undefined) {\n            this._audioSource.playOneShot(audioClip);\n        }\n    }\n}\n\n"]}