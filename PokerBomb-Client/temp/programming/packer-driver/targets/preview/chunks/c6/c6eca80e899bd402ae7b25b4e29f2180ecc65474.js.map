{"version":3,"sources":["file:///D:/Documents/OneDrive/%E6%A1%8C%E9%9D%A2/%E5%85%B6%E4%BB%96%E6%96%87%E4%BB%B6%E5%A4%B9/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/PokerBomb/PokerBomb-Client/assets/Script/loginScene/LoginScene.ts"],"names":["_decorator","Component","Node","EditBox","director","ccclass","property","LoginScence","start","globalThis","_eventtarget","on","onLoginMessage","button","wx","createUserInfoButton","type","text","style","left","top","width","height","lineHeight","backgroundColor","color","textAlign","fontSize","borderRadius","onTap","res","console","log","update","deltaTime","onLoginBtnClicked","str","my_EditBox","getComponent","string","senddata","id","_loginClientMgr","sendMessage","data","user","_userInfo","user_id","userId","user_name","userName","user_head_url","userHeadUrl","user_room_cards","userRoomCards","room_id","roomId","loadScene"],"mappings":";;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,O,OAAAA,O;AAASC,MAAAA,Q,OAAAA,Q;;;;;;;OACzC;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;;6BAGjBO,W,WADZF,OAAO,CAAC,aAAD,C,UAGHC,QAAQ,CAACJ,IAAD,C,2BAHb,MACaK,WADb,SACiCN,SADjC,CAC2C;AAAA;AAAA;;AAAA;AAAA;;AAKvCO,QAAAA,KAAK,GAAG;AACJC,UAAAA,UAAU,CAACC,YAAX,CAAwBC,EAAxB,CAA2B,OAA3B,EAAoC,KAAKC,cAAzC,EAAwD,IAAxD;;AACA,cAAMC,MAAM,GAAGC,EAAE,CAACC,oBAAH,CAAwB;AACnCC,YAAAA,IAAI,EAAE,MAD6B;AAEnCC,YAAAA,IAAI,EAAE,QAF6B;AAGnCC,YAAAA,KAAK,EAAE;AACLC,cAAAA,IAAI,EAAE,EADD;AAELC,cAAAA,GAAG,EAAE,EAFA;AAGLC,cAAAA,KAAK,EAAE,GAHF;AAILC,cAAAA,MAAM,EAAE,EAJH;AAKLC,cAAAA,UAAU,EAAE,EALP;AAMLC,cAAAA,eAAe,EAAE,SANZ;AAOLC,cAAAA,KAAK,EAAE,SAPF;AAQLC,cAAAA,SAAS,EAAE,QARN;AASLC,cAAAA,QAAQ,EAAE,EATL;AAULC,cAAAA,YAAY,EAAE;AAVT;AAH4B,WAAxB,CAAf;AAgBEf,UAAAA,MAAM,CAACgB,KAAP,CAAcC,GAAD,IAAS;AACpB;AACAC,YAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,WAHD;AAIL;;AAEDG,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;AAED;AACJ;AACA;;;AACWC,QAAAA,iBAAiB,GAAG;AACvB,cAAIC,GAAG,GAAG,KAAKC,UAAL,CAAgBC,YAAhB,CAA6BnC,OAA7B,EAAsCoC,MAAhD;AACAR,UAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAoBI,GAApB;AACA,cAAII,QAAQ,GAAG;AACXC,YAAAA,EAAE,EAAEL;AADO,WAAf;;AAGA3B,UAAAA,UAAU,CAACiC,eAAX,CAA2BC,WAA3B,CAAuC,OAAvC,EAAgDH,QAAhD;AACH;;AAEM5B,QAAAA,cAAc,CAACgC,IAAD,EAAM;AACvBA,UAAAA,IAAI,GAAGA,IAAI,CAACC,IAAZ;AACAd,UAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BY,IAA1B;AACAnC,UAAAA,UAAU,CAACqC,SAAX,CAAqBC,OAArB,GAA+BH,IAAI,CAACI,MAApC;AACAvC,UAAAA,UAAU,CAACqC,SAAX,CAAqBG,SAArB,GAAiCL,IAAI,CAACM,QAAtC;AACAzC,UAAAA,UAAU,CAACqC,SAAX,CAAqBK,aAArB,GAAqCP,IAAI,CAACQ,WAA1C;AACA3C,UAAAA,UAAU,CAACqC,SAAX,CAAqBO,eAArB,GAAuCT,IAAI,CAACU,aAA5C;AACA7C,UAAAA,UAAU,CAACqC,SAAX,CAAqBS,OAArB,GAA+BX,IAAI,CAACY,MAApC,CAPuB,CASvB;;AACApD,UAAAA,QAAQ,CAACqD,SAAT,CAAmB,WAAnB;AACH;;AAxDsC,O","sourcesContent":["import { _decorator, Component, Node, EditBox, director } from 'cc';\nconst { ccclass, property } = _decorator;\n\n@ccclass('LoginScence')\nexport class LoginScence extends Component {\n\n    @property(Node)\n    public my_EditBox: Node\n\n    start() {\n        globalThis._eventtarget.on('login', this.onLoginMessage,this);\n        const button = wx.createUserInfoButton({\n            type: 'text',\n            text: '获取用户信息',\n            style: {\n              left: 10,\n              top: 76,\n              width: 200,\n              height: 40,\n              lineHeight: 40,\n              backgroundColor: '#ff0000',\n              color: '#ffffff',\n              textAlign: 'center',\n              fontSize: 16,\n              borderRadius: 4\n            }\n          });\n          button.onTap((res) => {\n            // 此处可以获取到用户信息\n            console.log(res);\n          })\n    }\n\n    update(deltaTime: number) {\n        \n    }\n\n    /**\n     * onLogin\n     */\n    public onLoginBtnClicked() {\n        let str = this.my_EditBox.getComponent(EditBox).string;\n        console.log(\"获取账号:\",str);\n        let senddata = {\n            id: str\n        }\n        globalThis._loginClientMgr.sendMessage(\"login\", senddata);\n    }\n\n    public onLoginMessage(data){\n        data = data.user;\n        console.log(\"处理玩家登录消息: \", data);\n        globalThis._userInfo.user_id = data.userId;\n        globalThis._userInfo.user_name = data.userName;\n        globalThis._userInfo.user_head_url = data.userHeadUrl;\n        globalThis._userInfo.user_room_cards = data.userRoomCards;\n        globalThis._userInfo.room_id = data.roomId;\n\n        // 加载大厅场景\n        director.loadScene(\"HallScene\");\n    }\n\n    \n}\n\n"]}