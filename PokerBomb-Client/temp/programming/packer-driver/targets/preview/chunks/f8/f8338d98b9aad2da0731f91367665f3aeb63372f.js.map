{"version":3,"sources":["file:///D:/Documents/OneDrive/%E6%A1%8C%E9%9D%A2/%E5%85%B6%E4%BB%96%E6%96%87%E4%BB%B6%E5%A4%B9/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/PokerBomb/bzd-game/PokerBomb-Client/assets/Script/hallScene/HallSceneMgt.ts"],"names":["_decorator","Component","Node","Label","director","assetManager","SpriteFrame","Sprite","Texture2D","HallSoundMgt","ccclass","property","HallSceneMgt","start","init","update","deltaTime","globalThis","_eventtarget","on","onCreateRoom","onJoinRoom","idLabel","string","_userInfo","user_id","nameLabel","user_name","iconSp","iconImg","getComponent","loadRemote","user_head_url","ext","err","imageAsset","spriteFrame","texture","image","onCreateRoomBtnClicked","console","log","hallSoundMgt","play","createRoom","active","data","roomId","room_id","loadScene","onJoinRoomBtnClicked","joinRoom","onSetBtnClicked","alert"],"mappings":";;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,Q,OAAAA,Q;AAAkBC,MAAAA,Y,OAAAA,Y;AAAcC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,M,OAAAA,M;AAAoBC,MAAAA,S,OAAAA,S;;AACrGC,MAAAA,Y,iBAAAA,Y;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBX,U;;8BAGjBY,Y,WADZF,OAAO,CAAC,cAAD,C,UAGHC,QAAQ,CAACT,IAAD,C,UAERS,QAAQ,CAACR,KAAD,C,UAERQ,QAAQ,CAACR,KAAD,C,UAERQ,QAAQ,CAACT,IAAD,C,UAERS,QAAQ,CAACT,IAAD,C,UAGRS,QAAQ;AAAA;AAAA,uC,2BAdb,MACaC,YADb,SACkCX,SADlC,CAC4C;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAgBxCY,QAAAA,KAAK,GAAG;AACJ,eAAKC,IAAL;AACH;;AAEDC,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AAEMF,QAAAA,IAAI,GAAE;AACTG,UAAAA,UAAU,CAACC,YAAX,CAAwBC,EAAxB,CAA2B,YAA3B,EAAyC,KAAKC,YAA9C,EAA4D,IAA5D;;AACAH,UAAAA,UAAU,CAACC,YAAX,CAAwBC,EAAxB,CAA2B,UAA3B,EAAuC,KAAKE,UAA5C,EAAwD,IAAxD;;AACA,eAAKC,OAAL,CAAaC,MAAb,GAAsB,QAAQN,UAAU,CAACO,SAAX,CAAqBC,OAAnD;AACA,eAAKC,SAAL,CAAeH,MAAf,GAAwBN,UAAU,CAACO,SAAX,CAAqBG,SAA7C;AACA,cAAIC,MAAM,GAAG,KAAKC,OAAL,CAAaC,YAAb,CAA0BvB,MAA1B,CAAb;AACAF,UAAAA,YAAY,CAAC0B,UAAb,CAAoCd,UAAU,CAACO,SAAX,CAAqBQ,aAAzD,EAAwE;AAACC,YAAAA,GAAG,EAAE;AAAN,WAAxE,EAAuF,UAAUC,GAAV,EAAeC,UAAf,EAA2B;AAC9G,gBAAMC,WAAW,GAAG,IAAI9B,WAAJ,EAApB;AACA,gBAAM+B,OAAO,GAAG,IAAI7B,SAAJ,EAAhB;AACA6B,YAAAA,OAAO,CAACC,KAAR,GAAgBH,UAAhB;AACAC,YAAAA,WAAW,CAACC,OAAZ,GAAsBA,OAAtB;AACAT,YAAAA,MAAM,CAACQ,WAAP,GAAqBA,WAArB;AACH,WAND;AAOH,SArCuC,CAuCxC;;;AACOG,QAAAA,sBAAsB,GAAE;AAC3BC,UAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACA,eAAKC,YAAL,CAAkBC,IAAlB,CAAuB,QAAvB,EAF2B,CAG3B;;AACA,eAAKC,UAAL,CAAgBC,MAAhB,GAAyB,IAAzB;AACH;;AAEMzB,QAAAA,YAAY,CAAC0B,IAAD,EAAM;AACrB,cAAIC,MAAM,GAAGD,IAAI,CAACC,MAAlB;AACAP,UAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBM,MAAtB;AACA9B,UAAAA,UAAU,CAACO,SAAX,CAAqBwB,OAArB,GAA+BD,MAA/B;AACA3C,UAAAA,QAAQ,CAAC6C,SAAT,CAAmB,UAAnB;AACH;;AAEMC,QAAAA,oBAAoB,GAAE;AACzBV,UAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AACA,eAAKC,YAAL,CAAkBC,IAAlB,CAAuB,QAAvB;AACA,eAAKQ,QAAL,CAAcN,MAAd,GAAuB,IAAvB;AACH;;AAEMxB,QAAAA,UAAU,CAACyB,IAAD,EAAM;AACnB,cAAIC,MAAM,GAAGD,IAAI,CAACC,MAAlB;;AACA,cAAGA,MAAM,IAAI,CAAC,CAAd,EAAgB;AACZP,YAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBM,MAAtB;AACA9B,YAAAA,UAAU,CAACO,SAAX,CAAqBwB,OAArB,GAA+BD,MAA/B;AACA3C,YAAAA,QAAQ,CAAC6C,SAAT,CAAmB,UAAnB;AACH,WAJD,MAKKT,OAAO,CAACC,GAAR,CAAY,QAAZ;AACR;;AAEDW,QAAAA,eAAe,GAAE;AACbC,UAAAA,KAAK,CAAC,QAAD,CAAL;AACH;;AAxEuC,O","sourcesContent":["import { _decorator, Component, Node, Label, director, assert, assetManager, SpriteFrame, Sprite, ImageAsset, Texture2D } from 'cc';\r\nimport { HallSoundMgt } from './HallSoundMgt';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('HallSceneMgt')\r\nexport class HallSceneMgt extends Component {\r\n\r\n    @property(Node)\r\n    public createRoom: Node\r\n    @property(Label)\r\n    public nameLabel: Label\r\n    @property(Label)\r\n    public idLabel: Label\r\n    @property(Node)\r\n    public joinRoom: Node\r\n    @property(Node)\r\n    iconImg:Node\r\n\r\n    @property(HallSoundMgt)\r\n    private hallSoundMgt: HallSoundMgt;\r\n\r\n    start() {\r\n        this.init();\r\n    }\r\n\r\n    update(deltaTime: number) {\r\n        \r\n    }\r\n\r\n    public init(){\r\n        globalThis._eventtarget.on(\"createRoom\", this.onCreateRoom, this);\r\n        globalThis._eventtarget.on(\"joinRoom\", this.onJoinRoom, this);\r\n        this.idLabel.string = 'ID:' + globalThis._userInfo.user_id;\r\n        this.nameLabel.string = globalThis._userInfo.user_name;\r\n        let iconSp = this.iconImg.getComponent(Sprite);\r\n        assetManager.loadRemote<ImageAsset>(globalThis._userInfo.user_head_url, {ext: '.png'}, function (err, imageAsset) {\r\n            const spriteFrame = new SpriteFrame();\r\n            const texture = new Texture2D();\r\n            texture.image = imageAsset;\r\n            spriteFrame.texture = texture;\r\n            iconSp.spriteFrame = spriteFrame;\r\n        });\r\n    }\r\n\r\n    //创建房间按钮点击的逻辑\r\n    public onCreateRoomBtnClicked(){\r\n        console.log(\"创建房间按钮被点击了...\");\r\n        this.hallSoundMgt.play(\"button\");\r\n        // globalThis._hallClientMgr.sendMessage(\"create_room\",{});\r\n        this.createRoom.active = true;\r\n    }\r\n\r\n    public onCreateRoom(data){\r\n        let roomId = data.roomId;\r\n        console.log(\"创建了房间：\", roomId);\r\n        globalThis._userInfo.room_id = roomId;\r\n        director.loadScene(\"bazhadan\");\r\n    }\r\n\r\n    public onJoinRoomBtnClicked(){\r\n        console.log(\"加入房间按钮被点击了\");\r\n        this.hallSoundMgt.play(\"button\");\r\n        this.joinRoom.active = true;\r\n    }\r\n\r\n    public onJoinRoom(data){\r\n        let roomId = data.roomId;\r\n        if(roomId != -1){\r\n            console.log(\"加入了房间：\", roomId);\r\n            globalThis._userInfo.room_id = roomId;\r\n            director.loadScene(\"bazhadan\");\r\n        }\r\n        else console.log(\"房间号不存在\");\r\n    }\r\n\r\n    onSetBtnClicked(){\r\n        alert(\"敬请完善！！\");\r\n    }\r\n}\r\n\r\n"]}