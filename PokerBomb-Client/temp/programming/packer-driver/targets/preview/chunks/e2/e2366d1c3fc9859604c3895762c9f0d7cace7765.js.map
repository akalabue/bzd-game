{"version":3,"sources":["file:///D:/Documents/OneDrive/%E6%A1%8C%E9%9D%A2/%E5%85%B6%E4%BB%96%E6%96%87%E4%BB%B6%E5%A4%B9/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/PokerBomb/PokerBomb-Client/assets/Script/hallScene/HallSceneMgt.ts"],"names":["_decorator","Component","Node","Label","director","assetManager","SpriteFrame","Sprite","Texture2D","HallSoundMgt","ccclass","property","HallSceneMgt","start","init","update","deltaTime","globalThis","_eventtarget","on","onCreateRoom","onJoinRoom","nameLabel","string","vxUserInfo","nickName","iconSp","iconImg","getComponent","loadRemote","avatarUrl","ext","err","imageAsset","spriteFrame","texture","image","onCreateRoomBtnClicked","console","log","hallSoundMgt","play","createRoom","active","data","roomId","_userInfo","room_id","loadScene","onJoinRoomBtnClicked","joinRoom","onSetBtnClicked","alert"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, Label, director, assert, assetManager, SpriteFrame, Sprite, ImageAsset, Texture2D } from 'cc';\nimport { HallSoundMgt } from './HallSoundMgt';\nconst { ccclass, property } = _decorator;\n\n@ccclass('HallSceneMgt')\nexport class HallSceneMgt extends Component {\n\n    @property(Node)\n    public createRoom: Node\n    @property(Label)\n    public nameLabel: Label\n    @property(Label)\n    public idLabel: Label\n    @property(Node)\n    public joinRoom: Node\n    @property(Node)\n    iconImg:Node\n\n    @property(HallSoundMgt)\n    private hallSoundMgt: HallSoundMgt;\n\n    start() {\n        this.init();\n    }\n\n    update(deltaTime: number) {\n        \n    }\n\n    public init(){\n        globalThis._eventtarget.on(\"createRoom\", this.onCreateRoom, this);\n        globalThis._eventtarget.on(\"joinRoom\", this.onJoinRoom, this);\n        // this.idLabel.string = 'ID:' + globalThis._userInfo.user_id;\n        // this.nameLabel.string = globalThis._userInfo.user_name;\n\n        this.nameLabel.string = globalThis.vxUserInfo.nickName;\n        let iconSp = this.iconImg.getComponent(Sprite);\n        assetManager.loadRemote<ImageAsset>(globalThis.vxUserInfo.avatarUrl, {ext: '.png'}, function (err, imageAsset) {\n            const spriteFrame = new SpriteFrame();\n            const texture = new Texture2D();\n            texture.image = imageAsset;\n            spriteFrame.texture = texture;\n            iconSp.spriteFrame = spriteFrame;\n        });\n    }\n\n    //创建房间按钮点击的逻辑\n    public onCreateRoomBtnClicked(){\n        console.log(\"创建房间按钮被点击了...\");\n        this.hallSoundMgt.play(\"button\");\n        // globalThis._hallClientMgr.sendMessage(\"create_room\",{});\n        this.createRoom.active = true;\n    }\n\n    public onCreateRoom(data){\n        let roomId = data.roomId;\n        console.log(\"创建了房间：\", roomId);\n        globalThis._userInfo.room_id = roomId;\n        director.loadScene(\"bazhadan\");\n    }\n\n    public onJoinRoomBtnClicked(){\n        console.log(\"加入房间按钮被点击了\");\n        this.hallSoundMgt.play(\"button\");\n        this.joinRoom.active = true;\n    }\n\n    public onJoinRoom(data){\n        let roomId = data.roomId;\n        if(roomId != -1){\n            console.log(\"加入了房间：\", roomId);\n            globalThis._userInfo.room_id = roomId;\n            director.loadScene(\"bazhadan\");\n        }\n        else console.log(\"房间号不存在\");\n    }\n\n    onSetBtnClicked(){\n        alert(\"敬请完善！！\");\n    }\n}\n\n"]}