{"version":3,"sources":["file:///D:/CocosProjects/PokerBomb/assets/Script/games/bazhadan/BZDSceneMgt.ts"],"names":["_decorator","Component","Label","ccclass","property","BZDSceneMgt","start","init","globalThis","_eventtarget","on","onRequestRoomInfo","update","deltaTime","data","console","log","roomInfo","roomId","string","gamecount","currentNumbers","gameNumbers","scoreNumbers","updateAllSeats","gameRoles","users","cur","i","userId","_userInfo","user_id","seatName","userName","seatTotalPoints","totalPoints","seatJuPoints","juPoints","seatPanPoints","panPoints","room_seat"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, Label } from 'cc';\nimport { GameRole } from '../../common/GameRole';\nconst { ccclass, property } = _decorator;\n\n@ccclass('BZDSceneMgt')\nexport class BZDSceneMgt extends Component {\n\n    @property(Label)\n    public roomId: Label\n    @property(Label)\n    public gamecount: Label\n\n    @property(Label)\n    seatName: Label[] = [];\n    @property(Label)\n    seatTotalPoints: Label[] = [];\n    @property(Label)\n    seatJuPoints: Label[] = []\n    @property(Label)\n    seatPanPoints: Label[] = []\n\n    \n    start() {\n        this.init();\n    }\n\n    private init(){\n        globalThis._eventtarget.on(\"requestRoomInfo\", this.onRequestRoomInfo, this);\n    }\n\n    update(deltaTime: number) {\n        \n    }\n\n    public onRequestRoomInfo(data){\n        console.log(\"onrequestroomInfo：\",data);\n        let roomInfo = data.roomInfo;\n        this.roomId.string = roomInfo.roomId;\n        this.gamecount.string = roomInfo.currentNumbers + \"/\" + roomInfo.gameNumbers + \"局 \" + roomInfo.scoreNumbers + \"分\";\n        this.updateAllSeats(roomInfo.gameRoles);\n    }\n\n    updateAllSeats(users: GameRole[]){\n        // console.log(\"获取到所有座位信息：\",users);\n        let cur = 0;\n\n        //渲染本座位\n        for(let i = 0; i < 4; i++){\n            if(users[i] == null){\n                continue;\n            }\n            if(users[i].userId == globalThis._userInfo.user_id){\n                cur = i;\n                this.seatName[0].string = users[i].userName;\n                this.seatTotalPoints[0].string = \"总分:\" + users[i].totalPoints;\n                this.seatJuPoints[0].string = \"局:\" + users[i].juPoints;\n                this.seatPanPoints[0].string = \"盘:\" + users[i].panPoints;\n            }\n        }\n        globalThis._userInfo.room_seat = cur;\n        console.log(\"cur==\",cur);\n        //渲染其他座位\n        for(let i = 1; i < 4; i++){\n            if(++cur >= 4)cur -= 4;\n            console.log(cur,\"::::\",users[cur] == null);\n            if(users[cur] == null)continue;\n            console.log(\"嗯嗯嗯：\", i,cur);\n            this.seatName[i].string = users[cur].userName;\n            this.seatTotalPoints[i].string = \"总分:\" + users[cur].totalPoints;\n            this.seatJuPoints[i].string = \"局:\" + users[cur].juPoints;\n            this.seatPanPoints[i].string = \"盘:\" + users[cur].panPoints;\n        }\n    }\n}\n\n"]}