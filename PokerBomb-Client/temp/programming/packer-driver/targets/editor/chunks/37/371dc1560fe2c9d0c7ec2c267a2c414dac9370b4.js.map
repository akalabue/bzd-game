{"version":3,"sources":["file:///D:/Documents/OneDrive/%E6%A1%8C%E9%9D%A2/%E5%85%B6%E4%BB%96%E6%96%87%E4%BB%B6%E5%A4%B9/%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/PokerBomb/bzd-game/PokerBomb-Client/assets/Script/loginScene/LoginScene.ts"],"names":["_decorator","Component","Node","EditBox","director","ccclass","property","LoginScence","start","globalThis","_eventtarget","on","onLoginMessage","update","deltaTime","onLoginBtnClicked","str","my_EditBox","getComponent","string","console","log","senddata","id","_loginClientMgr","sendMessage","data","user","_userInfo","user_id","userId","user_name","userName","user_head_url","userHeadUrl","user_room_cards","userRoomCards","room_id","roomId","loadScene"],"mappings":";;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,O,OAAAA,O;AAASC,MAAAA,Q,OAAAA,Q;;;;;;;OACzC;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;;6BAGjBO,W,WADZF,OAAO,CAAC,aAAD,C,UAGHC,QAAQ,CAACJ,IAAD,C,2BAHb,MACaK,WADb,SACiCN,SADjC,CAC2C;AAAA;AAAA;;AAAA;AAAA;;AAKvCO,QAAAA,KAAK,GAAG;AACJC,UAAAA,UAAU,CAACC,YAAX,CAAwBC,EAAxB,CAA2B,OAA3B,EAAoC,KAAKC,cAAzC,EAAwD,IAAxD,EADI,CAEJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACH;;AAEDC,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;AAED;AACJ;AACA;;;AACWC,QAAAA,iBAAiB,GAAG;AACvB,cAAIC,GAAG,GAAG,KAAKC,UAAL,CAAgBC,YAAhB,CAA6Bf,OAA7B,EAAsCgB,MAAhD;AACAC,UAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAoBL,GAApB;AACA,cAAIM,QAAQ,GAAG;AACXC,YAAAA,EAAE,EAAEP;AADO,WAAf;;AAGAP,UAAAA,UAAU,CAACe,eAAX,CAA2BC,WAA3B,CAAuC,OAAvC,EAAgDH,QAAhD;AACH;;AAEMV,QAAAA,cAAc,CAACc,IAAD,EAAM;AACvBA,UAAAA,IAAI,GAAGA,IAAI,CAACC,IAAZ;AACAP,UAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BK,IAA1B;AACAjB,UAAAA,UAAU,CAACmB,SAAX,CAAqBC,OAArB,GAA+BH,IAAI,CAACI,MAApC;AACArB,UAAAA,UAAU,CAACmB,SAAX,CAAqBG,SAArB,GAAiCL,IAAI,CAACM,QAAtC;AACAvB,UAAAA,UAAU,CAACmB,SAAX,CAAqBK,aAArB,GAAqCP,IAAI,CAACQ,WAA1C;AACAzB,UAAAA,UAAU,CAACmB,SAAX,CAAqBO,eAArB,GAAuCT,IAAI,CAACU,aAA5C;AACA3B,UAAAA,UAAU,CAACmB,SAAX,CAAqBS,OAArB,GAA+BX,IAAI,CAACY,MAApC,CAPuB,CASvB;;AACAlC,UAAAA,QAAQ,CAACmC,SAAT,CAAmB,WAAnB;AACH;;AA7DsC,O","sourcesContent":["import { _decorator, Component, Node, EditBox, director } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('LoginScence')\r\nexport class LoginScence extends Component {\r\n\r\n    @property(Node)\r\n    public my_EditBox: Node\r\n\r\n    start() {\r\n        globalThis._eventtarget.on('login', this.onLoginMessage,this);\r\n        // let sysInfo = wx.getSystemInfoSync();\r\n        // //获取微信界面大小\r\n        // let screenWidth = sysInfo.screenWidth;\r\n        // let screenHeight = sysInfo.screenHeight;\r\n        // const vxLoginBtn = wx.createUserInfoButton({\r\n        //     type: 'text',\r\n        //     text: '',\r\n        //     style: {\r\n        //       left: 0,\r\n        //       top: 0,\r\n        //       width: screenWidth,\r\n        //       height: screenHeight,\r\n        //       lineHeight: 40,\r\n        //       backgroundColor: '#00000000',\r\n        //       color: '#ffffff',\r\n        //       textAlign: 'center',\r\n        //     }\r\n        //   });\r\n        //   vxLoginBtn.onTap((res) => {\r\n        //     // 此处可以获取到用户信息\r\n        //     console.log(res);\r\n        //     globalThis.vxUserInfo = res.userInfo;\r\n        //     // 加载大厅场景\r\n        //     director.loadScene(\"HallScene\");\r\n        //   })\r\n    }\r\n\r\n    update(deltaTime: number) {\r\n        \r\n    }\r\n\r\n    /**\r\n     * onLogin\r\n     */\r\n    public onLoginBtnClicked() {\r\n        let str = this.my_EditBox.getComponent(EditBox).string;\r\n        console.log(\"获取账号:\",str);\r\n        let senddata = {\r\n            id: str\r\n        }\r\n        globalThis._loginClientMgr.sendMessage(\"login\", senddata);\r\n    }\r\n\r\n    public onLoginMessage(data){\r\n        data = data.user;\r\n        console.log(\"处理玩家登录消息: \", data);\r\n        globalThis._userInfo.user_id = data.userId;\r\n        globalThis._userInfo.user_name = data.userName;\r\n        globalThis._userInfo.user_head_url = data.userHeadUrl;\r\n        globalThis._userInfo.user_room_cards = data.userRoomCards;\r\n        globalThis._userInfo.room_id = data.roomId;\r\n\r\n        // 加载大厅场景\r\n        director.loadScene(\"HallScene\");\r\n    }\r\n\r\n    \r\n}\r\n\r\n"]}